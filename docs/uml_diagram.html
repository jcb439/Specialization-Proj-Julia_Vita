<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>UML Diagram</title>
  <link rel="stylesheet" href="assets/css/styles.css"/>
  <style>
    .diagram-container {
      background: #f8f8f8;
      border: 2px solid #e0e0e0;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 40px;
      overflow: scroll;
      overflow-x: scroll;
      overflow-y: scroll;
      max-height: 85vh;
      max-width: 100%;
      position: relative;
    }
    
    .zoom-controls {
      position: sticky;
      top: 10px;
      left: 10px;
      z-index: 10;
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
    }
    
    .zoom-btn {
      background: #fff;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      padding: 8px 16px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      color: #333;
    }
    
    .zoom-btn:hover {
      background: #000;
      color: #fff;
      border-color: #000;
    }
    
    .zoom-level {
      background: #fff;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      padding: 8px 16px;
      font-size: 14px;
      font-weight: 600;
      color: #666;
    }
    
    .layer-toggle-btn {
      background: #fff;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      padding: 8px 16px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      color: #333;
    }
    
    .layer-toggle-btn:hover {
      background: #000;
      color: #fff;
      border-color: #000;
    }
    
    .diagram-layers {
      position: relative;
      min-height: 1400px;
      min-width: 2000px;
      transform-origin: top left;
      transition: transform 0.3s ease;
    }
    
    .diagram-layer {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      transition: opacity 0.4s ease;
    }
    
    .diagram-layer.background {
      z-index: 1;
      opacity: 1;
      cursor: pointer;
    }
    
    .diagram-layer.foreground {
      z-index: 2;
      opacity: 1;
      cursor: pointer;
      background: transparent;
    }
    
    .diagram-layer.foreground.hidden {
      opacity: 0;
      pointer-events: none;
    }
    
    .layer-toggle-btn {
      position: sticky;
      top: 10px;
      left: 10px;
      z-index: 10;
      background: #fff;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      padding: 10px 20px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      color: #333;
      margin-bottom: 15px;
    }
    
    .layer-toggle-btn:hover {
      background: #000;
      color: #fff;
      border-color: #000;
    }
    
    .diagram-container::-webkit-scrollbar {
      width: 12px;
      height: 12px;
    }
    
    .diagram-container::-webkit-scrollbar-track {
      background: #f1f1f1;
      border-radius: 10px;
    }
    
    .diagram-container::-webkit-scrollbar-thumb {
      background: #888;
      border-radius: 10px;
    }
    
    .diagram-container::-webkit-scrollbar-thumb:hover {
      background: #555;
    }
    
    .diagram-placeholder {
      background: linear-gradient(135deg, #f5f5f5 0%, #e8e8e8 100%);
      border: 2px dashed #ccc;
      border-radius: 8px;
      height: 100%;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #999;
      font-size: 16px;
      text-align: center;
      padding: 40px;
      line-height: 1.8;
    }
    
    .diagram-placeholder p {
      max-width: 500px;
    }
    
    .diagram-image {
      max-width: none;
      height: auto;
      display: block;
      border-radius: 8px;
    }
    
    .diagram-description {
      background: #f9f9f9;
      padding: 30px;
      border-radius: 12px;
      margin-bottom: 40px;
    }
    
    .diagram-description > p {
      color: #333;
      line-height: 1.8;
      margin-bottom: 15px;
    }
    
    .diagram-description > p:last-of-type {
      margin-bottom: 0;
    }
    
    .diagram-description ul {
      color: #555;
      line-height: 1.8;
      margin-left: 25px;
    }
    
    .diagram-description ul li {
      margin-bottom: 10px;
    }
    
    .component-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
      margin-bottom: 25px;
    }
    
    .component-box {
      background: #fff;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      padding: 20px;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      min-height: 80px;
      display: flex;
      flex-direction: column;
    }
    
    .component-box:hover {
      border-color: #000;
      transform: translateY(-3px);
      box-shadow: 0 5px 20px rgba(0,0,0,0.1);
    }
    
    .component-title {
      font-weight: 600;
      font-size: 15px;
      color: #000;
      margin-bottom: 10px;
    }
    
    .component-detail {
      font-size: 14px;
      color: #666;
      line-height: 1.6;
      max-height: 0;
      overflow: hidden;
      opacity: 0;
      transition: all 0.3s ease;
    }
    
    .component-box:hover .component-detail {
      max-height: 200px;
      opacity: 1;
    }
    
    .color-legend {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 15px;
      margin-top: 20px;
      margin-bottom: 20px;
    }
    
    .legend-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 12px 15px;
      background: #fff;
      border-radius: 8px;
      border: 2px solid #e0e0e0;
    }
    
    .legend-line {
      width: 40px;
      height: 3px;
      border-radius: 2px;
    }
    
    .legend-line.blue {
      background: #4A90E2;
    }
    
    .legend-line.grey {
      background: #999;
    }
    
    .legend-text {
      font-size: 13px;
      color: #555;
      line-height: 1.5;
    }
    
    .legend-text strong {
      color: #000;
      display: block;
      margin-bottom: 2px;
    }
  </style>
</head>
<body>
  
  <nav class="nav-sidebar" id="navSidebar">
    <div class="nav-logo"></div>
    <div class="nav-subtitle">Fall 2025 • Design 8131</div>
    <ul class="nav-menu">
      <li class="nav-item"><a href="index.html" class="nav-link">Home</a></li>
      <li class="nav-item"><a href="knowledge.html" class="nav-link">State of Knowledge</a></li>
      <li class="nav-item"><a href="community.html" class="nav-link">Community Practice</a></li>
      <li class="nav-item"><a href="literature.html" class="nav-link">Literature Review</a></li>
      <li class="nav-item"><a href="ontology.html" class="nav-link">Ontology Diagram</a></li>
      <li class="nav-item"><a href="prototype.html" class="nav-link">Radical Prototype 10/16</a></li>
      <li class="nav-item"><a href="prototype_2.html" class="nav-link">Radical Prototype 10/23</a></li>
      <li class="nav-item"><a href="forking.html" class="nav-link">Forking Paths</a></li>
      <li class="nav-item"><a href="barriers.html" class="nav-link">Barriers to Entry</a></li>
      <li class="nav-item"><a href="uml_diagram.html" class="nav-link active">UML Diagram</a></li>
    </ul>
  </nav>
    
  <button class="menu-toggle" onclick="toggleMenu()"><span></span><span></span><span></span></button>
  <main class="main-content">
    <div class="header">
      <div class="header-meta">Variables & Relationships</div>
      <h1 class="page-title">UML Diagram</h1>
      <p class="page-subtitle">Understanding the units within our system</p>
    </div>
    <div class="content">
      
      <div class="section">
        <div class="diagram-description">
          <p>
            This UML diagram illustrates the key components, relationships, and data flows within the Shopping Speed Bump system. It shows how different classes interact to provide a seamless intervention experience during online shopping.
          </p>
          
          <p><strong>Key components (hover to reveal details):</strong></p>
          <div class="component-grid">
            <div class="component-box">
              <div class="component-title">User Reflection Intervention</div>
              <div class="component-detail">Browser extension, user preferences/goals, reflection prompts, and response tracking that create the intervention experience</div>
            </div>
            
            <div class="component-box">
              <div class="component-title">Item & Wardrobe Management</div>
              <div class="component-detail">Wardrobe items, shopping items, storage system, categories, and similarity engine for comparison algorithms</div>
            </div>
          </div>
          
          <p style="color:#666;font-size:14px;margin-top:20px;">
            <em>Tip: Use both horizontal and vertical scrolling to explore the full diagram. Use zoom controls to focus on specific class relationships and details.</em>
          </p>
        </div>
        
        <div class="diagram-container" id="diagramContainer">
          <div class="zoom-controls">
            <button class="zoom-btn" onclick="zoomOut()">−</button>
            <div class="zoom-level" id="zoomLevel">100%</div>
            <button class="zoom-btn" onclick="zoomIn()">+</button>
            <button class="zoom-btn" onclick="resetZoom()">Reset</button>
            <button class="layer-toggle-btn" id="toggleBtn" onclick="toggleLayer()">Hide Overlay</button>
          </div>
          
          <div class="diagram-layers" id="diagramLayers">
            <!-- Background Layer (always visible, clickable to show overlay) -->
            <div class="diagram-layer background" id="backgroundLayer" onclick="toggleLayer()">
              <img src="assets/img/background.png" alt="UML Background Diagram" style="width:100%;height:auto;display:block;">
            </div>
            
            <!-- Foreground Layer (clickable with transparent background) -->
            <div class="diagram-layer foreground" id="foregroundLayer" onclick="toggleLayer()">
              <img src="assets/img/covers.png" alt="UML Foreground Overlay" style="width:100%;height:auto;display:block;">
            </div>
          </div>
        </div>
      </div>
      
      <div class="section">
        <h2 class="section-header">Math Challenges</h2>
        <p style="color:#333;line-height:1.8;margin-bottom:30px;">
          The Shopping Speed Bump system relies on several mathematical algorithms and computational challenges to provide accurate, personalized interventions. <strong>A key innovation is that weights and scoring adapt over time</strong> - the system learns from each user's shopping behaviors, decisions, and stated goals to become more personally relevant and effective.
        </p>
        
        <div class="component-grid">
          <div class="component-box">
            <div class="component-title">Similarity Scoring Algorithm</div>
            <div class="component-detail">
              <strong>Challenge:</strong> Determining how similar a shopping item is to existing wardrobe items in a way that's personally relevant to each user.<br><br>
              <strong>Approach:</strong> Multi-attribute weighted comparison using color matching, category overlap, pattern recognition, and style similarity. Weights are adaptive and personalized - they adjust over time based on which attributes actually influence the user's purchase decisions and align with their stated goals.<br><br>
              <strong>Formula:</strong> Similarity = Σ(weight<sub>i</sub> × match<sub>i</sub>) where weights evolve based on user behavior
            </div>
          </div>
          
          <div class="component-box">
            <div class="component-title">Threshold Optimization</div>
            <div class="component-detail">
              <strong>Challenge:</strong> Setting the right similarity threshold to trigger interventions without causing alert fatigue.<br><br>
              <strong>Approach:</strong> Dynamic threshold adjustment based on user behavior. If users frequently dismiss prompts, threshold increases. If users often reconsider purchases, threshold may lower.<br><br>
              <strong>Adaptive formula:</strong> New Threshold = Current Threshold ± (Dismiss Rate × Adjustment Factor)
            </div>
          </div>
          
          <div class="component-box">
            <div class="component-title">Adaptive Weight Calibration</div>
            <div class="component-detail">
              <strong>Challenge:</strong> Determining which attributes matter most for each individual user and adapting to their evolving preferences and goals.<br><br>
              <strong>Approach:</strong> Weights are continuously recalibrated based on user behavior patterns - what similarities actually caused them to reconsider purchases, which attributes align with their stated goals (e.g., if goal is "reduce fast fashion," brand weight increases). The system learns from every interaction and adjusts to be more personally relevant over time.<br><br>
              <strong>Personalized learning:</strong> Initial weights → User behavior feedback → Goal alignment → Updated weights → Repeat
            </div>
          </div>
            </div>
          </div>
        </div>
      </div>
      
    </div>
  </main>
  <script src="assets/js/app.js"></script>
  <script>
    let currentZoom = 0.5;
    const minZoom = 0.25;
    const maxZoom = 3;
    const zoomStep = 0.25;
    
    function updateZoom() {
      const layers = document.getElementById('diagramLayers');
      const zoomLevel = document.getElementById('zoomLevel');
      layers.style.transform = `scale(${currentZoom})`;
      zoomLevel.textContent = `${Math.round(currentZoom * 100)}%`;
    }
    
    function zoomIn() {
      if (currentZoom < maxZoom) {
        currentZoom += zoomStep;
        updateZoom();
      }
    }
    
    function zoomOut() {
      if (currentZoom > minZoom) {
        currentZoom -= zoomStep;
        updateZoom();
      }
    }
    
    function resetZoom() {
      currentZoom = 0.5;
      updateZoom();
    }
    
    function toggleLayer() {
      const foreground = document.getElementById('foregroundLayer');
      const toggleBtn = document.getElementById('toggleBtn');
      
      if (foreground.classList.contains('hidden')) {
        foreground.classList.remove('hidden');
        toggleBtn.textContent = 'Hide Overlay';
      } else {
        foreground.classList.add('hidden');
        toggleBtn.textContent = 'Show Overlay';
      }
    }
    
    // Initialize zoom on page load
    window.addEventListener('DOMContentLoaded', function() {
      updateZoom();
    });
  </script>
</body>
</html>